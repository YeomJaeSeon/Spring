# 저번에 가졌던 의문점

- request 스코프 빈은 HTTP요청이 들어와야 생성되고 HTTP요청나갈때 소멸된다고 배웠다.
- 그럼 스프링 컨테이너가 최초에 뜰때 request 스코프빈을 의존하기위해 DI를하면 에러가 뜬다.
- 이럴때 나는 강제적으로 HTTP요청을 시키는 등의 방법으로 해결하는줄알았다.

# 해결방법

- 싱글톤 스코프 빈내에서 프로토타입 스코프빈을 의존할때 사용했던 Provider를 사용한다.
- 정확히는 스프링이제공하는 ObjectProvider를 사용할것이고(Provider사용해도됨 - 자바 표준) ObjectProvider객체는 스프링 컨테이너에서 **스프링 빈을 조회하는 기능을한다.**
- 그래서 최초에 request 스코프빈을 DI할때 request 스코프 빈 자체를 DI하는게 아닌 request 스코프 빈을 Look Up(스프링 컨테이너에서 직접 찾아서 가져오는 행위)하기 위한 ObjectProvider객체를 의존한다.
- 그리고 HTTP요청이들어오면 `getObject()`메서드로 Look UP(스프링 컨테이너에서 해당 빈을 찾는다. 있으면 조회해서 가져오고 없으면 생성해서 가져온다.) 하는데, 스프링 컨테이너에는 request 스코프 빈이 존재하지 않기때문에 생성해서가져와야하는데 `getObject()`메서드가 호출된 시점은 컨트롤러의 `requestMapping`에 따라서 HTTP요청이 되어 메서드가 호출된 시점이므로 HTTP 요청이 진행되는 시점이다. 그래서 request 스코프 빈을 생성해서 가져올수있다.

# request 스코프 빈 중요한점

- HTTP요청이 되면 스프링 빈이 생성되고 요청이 나가면 스프링빈이 소멸된다.
- HTTP 요청마다 새로운 빈을 생성한다. (동시에 100명의 사용자가 HTTP요청을 하면 100개의 다른 request 스코프 빈 객체가 생성된다.)
