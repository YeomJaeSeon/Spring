# 쿠키

- Set-Cookie : 서버에서 클라이언트로 쿠키전달(응답)
- Cookie : 클라이언트가 서버에서 받은 쿠키를 웹브라우저의 쿠키저장소에 저장하고 HTTP 요청시 헤더에담아서 서버로 전달.!(요청)

## 쿠키 왜써?

- 쿠키를 사용하지않는 경우를 생각해보면 쉽게알수있음. HTTP는 기본적으로 Stateless함. 서버, 클라이언트가 서로 상태를 저장하지않아. 그래서 만약 로그인이 필요할때나 서로 상태를 저장해야할때 , 상태지속이 필요할때는 매요청마다 같은 로그인 데이터를 넘겨야함.. 이건 개발자에게도 너무힘든일이고 보안에도 취약함.. 그래서 쿠키라는 헤더에 데이터를 넣어서 상태 유지를 가능케한다.

## 쿠키 어떻게동작하는데?

- 클라이언트가 로그인 정보를 함께 서버로 요청하면 서버는 `Set-Cookie`헤더에 데이터를 넣어서 다시 클라이언트로 응답. 그러면 웹브라우저의 쿠키저장소에서 해당 쿠키를 저장해놓고 다시 서버로 요청을 보낼때 `Cookie`헤더에 로그인 정보를 넣어서 요청하게 된다. 이럼으로써 서버는 오 이녀석 로그인한 상태구나~ 라는걸 깨닫고 클라이언트 서버간의 상태를 유지할수있게된다.

## 쿠키는 그럼 언제써?

- 사용자의 로그인 세션관리할때(로그인 상태 유지가 필요할때..)
- 광고정보 트래킹할때.. 어떤 브라우저에서 이러한 광고를 보는군! 하고 분석할때 사용함.

## 쿠키의 특징!

- 쿠키정보는 항상 서버로 전달됨. 그러므로 네트워크 트래픽 추가 유발이되므로 최소한의정보만 쿠키에 넣어서 전달해야함. 세션id, 인증토큰정도만. 서버에 전달할필요가없는 데이터는 웹스토리지(웹브라우저에서 저장하는) 를 이용해서 데이터를 저장하자.

- 쿠키에 절대 절대 개인정보 데이터를 넣지말자.

- 쿠키는 만료일을 줘서 생명주기를 줄수있음
- 쿠키는 도메인을 지정할수있음 해당 도메인에서만 쿠키에 접근할수있도록.
- 쿠키에는 경로도 설정할수있는데 해당 경로 하위페이지에서 접근할수있또록 기본으로 설정되어있음
- 쿠키는 보안을 위해서 secure라는 녀석도 함께 헤더에 넣어서 전달할수있는데 이러면 https인경우에만 쿠키가 전송됨 추가로 HttpOnly를 헤더에 같이 넣으면 자바스크립트로 쿠키에접근을막고 SameSite를 헤더에 넣으면 요청 도메인과 쿠키에 설정된 도메인이 같은경우에만 쿠키가 전송됨.
