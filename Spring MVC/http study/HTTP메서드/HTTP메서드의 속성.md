# HTTP 메서드의 속성

- 안전
- 멱등(Idempotent)
- 캐시가능(웹브라우저가 로컬pc에 캐시가능한지여부)

## 안전

- HTTP 메서드 요청해도 리소스가 변하지 않냐의 여부이다.
- GET은 당연히 안전하다. 단순히 리소스 조회만하므로
- 그러나 POST PUT, PATCH, DELETE는 리소스가 변하므로 안전하지않아.

-> 그런데 GET을 오지게 많이 요청해서 서버에 로그가 너무많이찍혀서 장애가 발생하면? : 그런부분은 안전에서 판단하지않음. 안전속성은 단순히 리소스가 변하냐 안변하냐만 고려

## 멱등(Idempotent)

- 한번호출하던 100번호출하더 결과가 같다.
- GET은? 당연히 멱등하겟지, 10번 조회하던 100번조회하던 결과가같으닌까
- PUT은? PUT도 멱등하다. 결과를 완전 대체하므로 여러번 호출해도 최종 결과는 같다.
- DELETE? DELETE도 멱등 1번 호출해서 지우던 100번호출해서 지우던 최종 결과는 같음
- POST는? 멱등하지 않다! . 요청한 데이터를 처리해야하는데, 그 처리가 복잡하므로 멱등하지않음. 예를들면 결제를 요청하는데 두번요청하면 안된다. 이렇게 HTTP메서드를 한번 호출하던 100번 호출하던 결과가 같지않은 POST메서드는 멱등하지 않다.

### 왜 멱등씀?

- 자동 복구 매커니즘때문이다.
- 이게 뭔말이냐면 클라이언트가 HTTP 요청했을때 서버가 정상으로 응답을 못줬을 경우(TIMEOUT이던지 뭐던지..) 클라이언트가 같은 요청을 자동으로 해도되는지의 판단 여부가된다.
- 예를들면 DELETE로 염재선 회원 리소스 삭제를 요청했는데 서버에서 장애로 응답을 못줌. 이러면 클라이언트에서 자동으로 다시 요청을 한다.(DELETE는 멱등하기때문에)

### 멱등 궁금증

- GET이 멱등하다했는데 GET으로 한번호출하고 PUT으로 리소스대체하고 다시 GET하면 바뀐데이터 조회되는데 이러면 멱등하지 않잖아. GET과 PUT인 멱등한 메서드로 호출했는데..
- 이러한경우는 멱등으로 판단하지않음. 즉, 외부의 요인때문에 리소스가 변경되는건 멱등으로 고려하지 않는다. 단순히 하나의 클라이언트에서 하나의 같은 메서드로 요청한 것에대해서만 멱등으로 고려한다.

## 캐시가능

- 웹브라우저에서 굉장히큰 이미지를 서버에게 요청함. 그러넫 두번째 요청할땐 굳이 다시 요청해서 다운받고 해야할까? NONO, 웹브라우저가 로컬 PC에 캐시해서 다시 요청안할수있따.
- 이게바로 캐시이다.
- 즉, 응답 결과 리소스를 캐시해도 사용해도 되는가? 의 여부이다
- 결론부터말하면 GET과HEAD, POST PATCH는 캐시가능하지만 캐시키가 맞아야 캐시가능하기때문에 구현이 편한 GET, HEAD만 캐시한다.
- 실무에선 GET메서드에 대해서만 캐시가능을 이용한다.
