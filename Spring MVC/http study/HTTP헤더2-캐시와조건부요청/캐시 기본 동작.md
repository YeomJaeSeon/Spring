# 캐시 기본 동작 과정

## 캐시사용안할때..

1. 클라이언트에서 어떤 큰 이미지를 요청함
2. 서버에선 해당 이미지를 클라이언트로 내려준다.(꽤커서 오래걸린다.)
3. 클라이언트에선 해당이미지를 받는다.
4. 그리고 좀있다가 다시 클라이언트가 다시 같은 이미지를 요청한다.
5. 서버는 다시 같은 이미지를 다시 응답한다..
   ...

- 네트워크는 비싸고 느려서 너무 효율적이지않다.
- 같은 이미진데 굳이굳이 다시 네트워크로 다운받아야하나?
- 클라이언트에서 저장해놓고 다시 요청안하고 클라이언트가 저장소에서 다시 꺼내서 사용하면안되나??

## 캐시 사용할때..

1. 클라이언트는 어떤 큰이미지를 요청
2. 서버는 해당이미지를 응답하는데 헤더에 **cache-control**헤더와함께 유효시간을 보낸다.
3. 클라이언트는 해당 이미지를 다운받는다(최초에는 당연히 다운받아야함)
4. 클라이언트는 다시 해당 이미지가 필요할때 먼저 브라우저의 캐시저장소에서 캐시를 뒤지고 유효시간전이면 해당 캐시 저장소의 캐시된 이미지를 사용한다.(다시 요청하고 응답받으면서 네트워크 안사용해도되니 비용이 줄어든다!!)

- 불필한 요청과 응답사이에서일어나는 네트워크 비용이 줄어들어 매우 효율적임.!
- 사용자 경험도 당연히 좋아짐

## 캐시사용하는데 유효시간이 끝나면..

1, 2, 3은 같음 4. 클라이언트가 해당이미지가 필요해서 브라우저의 캐시 저장소를 뒤적 뒤적했는데 유효시간이 끝났어.. 그럼다시 요청한다. 5. 서버는 새로운 **cache-control**과함꼐 다시 유효시간 갱신하며 이미지 내려준다. 6. 웹브라우저는 이미지를 다운받고 캐시저장소에 넣어둔다..

- 그런데 이미지가 바뀐게아닌데 유효시간 끝났따고 다시 네트워크를 통해서 다운받는게 효율적인가??
- 이에 대한 답변은 다음시간에..

# 결론

- 캐시를 이용하면 매우효율적으로 리소스를 이용할수있다.
- 캐시 유효시간이 끝나도 요청하는 대상인 리소스가 변경이 일어나지않으면 다시 새롭게 해당 리소스를 다운받을 필요가있을까? 에대한 의문을 가지고 다음시간으로가자.
